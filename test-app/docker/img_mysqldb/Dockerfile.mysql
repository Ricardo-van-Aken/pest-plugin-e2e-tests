# Official MySQL 8.0 Debian image from Docker Hub - 4 November 2025
FROM mysql@sha256:40091f922208256907fc4a420708acd745619e914e1d4b63c4579b19e4fe27c0

# Remove MySQL repository (expired GPG key - gettext-base is from Debian repos)
RUN rm -f /etc/apt/sources.list.d/mysql.list /etc/apt/sources.list.d/mysql-*.list || true

RUN apt-get update && apt-get install -y gettext-base && rm -rf /var/lib/apt/lists/*

# Copy the cloner init SQL script template
COPY scripts/init-cloner.sql.template /tmp/init-cloner.sql.template

COPY scripts/custom-entrypoint.sh /custom-entrypoint.sh
RUN chmod u+x /custom-entrypoint.sh
